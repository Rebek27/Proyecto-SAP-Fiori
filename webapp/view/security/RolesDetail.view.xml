<mvc:View
  controllerName="com.invertions.sapfiorimodinv.controller.security.RolesDetail"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:m="sap.m"
  xmlns:core="sap.ui.core">

  <m:Page
    id="rolesDetailPage"
    title="Detalles de rol: {selectedRole>ROLENAME}"
    showNavButton="true"
    navButtonPress=".onNavBack">

    <!-- ðŸ”¹ Acciones del Rol -->
    <m:headerContent>
      <m:Toolbar>
        <m:ToolbarSpacer />
        <m:Button
          text="Editar"
          icon="sap-icon://edit"
          press=".onEditRole" />
        <m:Button
          text="Eliminar"
          icon="sap-icon://delete"
          type="Reject"
          press=".onDeleteRole" />
      </m:Toolbar>
    </m:headerContent>

    <m:content>

      <!-- ðŸ”¹ InformaciÃ³n del rol -->
      <m:VBox id="roleInfoBox" class="sapUiSmallMargin">
        <m:Text id="roleIdText" text="ID: {selectedRole>ROLEID}" />
        <m:Text id="roleDescriptionText" text="{selectedRole>DESCRIPTION}" class="sapUiSmallMarginBottom" />
      </m:VBox>

      <!-- ðŸ”¹ Procesos del rol -->
      <m:Panel
        id="processesPanel"
        headerText="Procesos y Privilegios"
        expandable="false"
        class="sapUiMediumMarginTop">

        <m:Toolbar>
          <m:ToolbarSpacer />
          <m:Button
            icon="sap-icon://add"
            text="Agregar Proceso"
            press=".onAddProcess"
            type="Emphasized" />
        </m:Toolbar>

        <m:Table
          id="processesTable"
          items="{selectedRole>PROCESSES}"
          inset="false"
          width="100%"
          growing="true"
          noDataText="Este rol no tiene procesos asignados.">

          <m:columns>
            <m:Column>
              <m:Text text="Proceso" />
            </m:Column>
            <m:Column>
              <m:Text text="AplicaciÃ³n" />
            </m:Column>
            <m:Column>
              <m:Text text="Vista" />
            </m:Column>
            <m:Column>
              <m:Text text="Privilegios" />
            </m:Column>
          </m:columns>

          <m:items>
            <m:ColumnListItem>
              <m:cells>
                <m:Text text="{selectedRole>PROCESSNAME}" />
                <m:Text text="{selectedRole>APPLICATIONNAME}" />
                <m:Text text="{selectedRole>VIEWNAME}" />
                <m:HBox wrap="Wrap">
                  <m:FlexBox wrap="Wrap" items="{selectedRole>PRIVILEGES}">
                    <m:items>
                      <m:ObjectStatus
                        text="{selectedRole>PRIVILEGENAME}"
                        class="sapUiTinyMarginEnd sapUiTinyMarginTop" />
                    </m:items>
                  </m:FlexBox>
                </m:HBox>
              </m:cells>
            </m:ColumnListItem>
          </m:items>

        </m:Table>

      </m:Panel>

      <m:Panel
  headerText="Usuarios con este Rol"
  class="sapUiMediumMarginTop"
  expandable="false">

 <m:Table
  id="usersTable"
  items="{selectedRole>USERS}"
  inset="false"
  width="100%"
  growing="true"
  noDataText="Este rol no tiene usuarios asignados.">

  <m:columns>
    <m:Column><m:Text text="Usuario" /></m:Column>
    <m:Column><m:Text text="Nombre completo" /></m:Column>
    <m:Column><m:Text text="Empresa" /></m:Column>
    <m:Column><m:Text text="Departamento" /></m:Column>
  </m:columns>

  <m:items>
    <m:ColumnListItem>
      <m:cells>
        <m:Text text="{selectedRole>USERID}" />
        <m:Text text="{selectedRole>USERNAME}" />
        <m:Text text="{selectedRole>COMPANYNAME}" />
        <m:Text text="{selectedRole>DEPARTMENT}" />
      </m:cells>
    </m:ColumnListItem>
  </m:items>

</m:Table>

</m:Panel>
    </m:content>
  </m:Page>
</mvc:View>
